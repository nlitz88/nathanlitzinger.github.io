<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>FS3 - My Mock File System | Nathan Litzinger</title>
<meta name=keywords content>
<meta name=description content="As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I&rsquo;ve had the pleasure of stressing about thus far in school: building a file system.
 Err&ndash;okay, I won&rsquo;t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. However, that wasn&rsquo;t quite the point of this assignment.">
<meta name=author content="Nathan Litzinger">
<link rel=canonical href=https://nlitz88.github.io/projects/filesystem/filesystem/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.1">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="FS3 - My Mock File System">
<meta property="og:description" content="As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I&rsquo;ve had the pleasure of stressing about thus far in school: building a file system.
 Err&ndash;okay, I won&rsquo;t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. However, that wasn&rsquo;t quite the point of this assignment.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://nlitz88.github.io/projects/filesystem/filesystem/"><meta property="og:image" content="https://nlitz88.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="projects">
<meta property="article:published_time" content="2021-12-15T03:25:10+00:00">
<meta property="article:modified_time" content="2021-12-15T03:25:10+00:00"><meta property="og:site_name" content="Nathan Litzinger">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://nlitz88.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="FS3 - My Mock File System">
<meta name=twitter:description content="As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I&rsquo;ve had the pleasure of stressing about thus far in school: building a file system.
 Err&ndash;okay, I won&rsquo;t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. However, that wasn&rsquo;t quite the point of this assignment.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://nlitz88.github.io/projects/"},{"@type":"ListItem","position":2,"name":"FS3 - My Mock File System","item":"https://nlitz88.github.io/projects/filesystem/filesystem/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FS3 - My Mock File System","name":"FS3 - My Mock File System","description":"As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I\u0026rsquo;ve had the pleasure of stressing about thus far in school: building a file system.\n Err\u0026ndash;okay, I won\u0026rsquo;t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. However, that wasn\u0026rsquo;t quite the point of this assignment.","keywords":[],"articleBody":"As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I’ve had the pleasure of stressing about thus far in school: building a file system.\n Err–okay, I won’t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. However, that wasn’t quite the point of this assignment. Rather, this assignment was focused on introducing us to the core tenets of system design. Namely:\n1. Architecting and designing useful abstractions 2. Debugging and profiling our systems 3. Maintaining and refactoring our designs as requirements change Thus, this was really our professor’s way of giving us real software engineering experience while also forcing us to really practice good software design. This proposed project was of course quite daunting, but proved to be one of the most engaging, useful, and practical development experiences I’ve had in a class so far at Penn State!\nOn that note, I thought I’d talk just a little about each component of this experience above, since I’m not quite allowed to share the source code.\n1. Useful Abstractions The final component of this assignment was adding the ability to have the filesystem connect to a remote disk controller server and interface with the controller via the POSIX send/recv (read/write) operations using TCP stream sockets. It was at this point just how I realized how much more comfortable (and dare I say proficient even) I was getting at effectively abstracting away different operation sequences and levels of complexity. That is, by the time I was implementing this final feature, I felt like I could confidently come up with an attack plan that intuitively abstracted away the underlying networking operations (like the low-level POSIX calls) into robust interaces.\nThis exercise in designing useful abstractions was not only very practical for my future software projects, but also proved extremely effective in helping us internalize how systems (of all kinds) around us are designed and maintained, software or not.\nPrior to this course (and this assignment), I had very little confidence in identifying the bridge between the high level Linux programs, tools, and interfaces that I had become famliar with and the low level components of the operating system and hardware. Now, however, I’ve been reminded that nothing about computers is magic. Instead, it’s all about abstracting away functionality in useful ways. In the same way that one becomes familiar with the libraries and interfaces available when developing a python program, for instance, I feel like I can approach developing low-level programs/systems in the same way now! That is, a set of abstractions is made available for each level that you might be developing for at your disposal.\nPerhaps more practically, however, I now feel like I’m not limited to the level at which I can develop. If I need to develop a device driver for a custom component some day, I now know that developing software to interact with that hardware will simply involve constructing sets of useful abstractions at each software layer until the target user can carry out their operations. With this newfound confidence/knowledge, I’ll carry on to the other takeaways.\n2. Debugging and Profiling Yes, this was the painful part. As I’m sure many developers and students can relate to, planning, architecting, and designing your program or system is typically the cool part. Deciding what libraries, frameworks, protocols, hardware, and so on to use is…well definitely one of my favorite parts. It’s when you start building and begin running into issues and bugs where the fun train comes to a halt.\nI will say that I’ve met quite a few people who enjoy tracking down bugs, and admittedly yes, it can be quite interesting at times. We all have to get good at it! It’s just I find it less enjoyable when I have to spend my time indentifying careless errors.\nAnyways, this assignment forced me to get really comfortable with programs like gdb and valgrind. Debugging is one of the those skills that I quite literally refused to learn up until this point. It wasn’t me being adament or stubborn, but more so just the fact that I have not needed to use it up until now. That is, I could just get away with print debugging. In this assignment, however, that just wasn’t going to be feasible.\nI was particularly forced into using gdb at first when implementing my operations to do “register packing.” That is, constructing the 64-bit instructions that were used to control the virtual disk controller. Trying to debug these without being able to go line-by-line proved wildly impractical, and thus I was finally urged to jump on the gdb train, and I’m glad I did.\nValgrind came around when I began running into some issues reallocating my version of the system open file table. Valgrind helped me indirectly indentify that I was incorrectly re-allocating the table upon filling up, which really just came down to an annoyingly small usage issue. There went 7 hours of my life!\nIf I learned anything from using these tools (other than how to use them), it was the need for unit testing. One of my biggest, most time consuming errors showed up in the final component of the project, and it was a matter of missing a single line of code in a core function–a simple oversight that costed me two days of my Fall break! Implementing a simple unit test to see if it’s behavior was up to snuff would’ve allowed me to immediately identify my error when I built the function three weeks prior, rather than searching in the dark when I least expected for it to malfunction. Needless to say, I’ll be thinking twice next time I build something at this kind of scale when it comes to building unit tests. When projects get large, they seem to be less of an option and more of a necessity!\n3. Maintaining and Refactoring Another big lesson that our professor wanted to give us experience with was having to refactor our project and maintain it as requirements change. Oh, and they did. I will say, however, that the more general the abstractions I created in the first iteration boded nicely for use in the additional iterations, once again reinforcing the importance of good abstractions.\nI definitely had some experience with this already at some of the internships I’ve done, and I think that definitely helped me quite a bit in the initial design of my system and abstractions. I’m wired in a way wherein I often stumble over planning a little too far in advance with some of my projects/programs. This can sometimes be very annoying, as it can seem impossible to even get started! While I don’t feel that this is a bad approach to design, I don’t want it to be what stops me from taking up projects and ideas. For that reason, I’m always looking for ways to get better about this.\nFor this assignment, I do feel as though I did a fair amount of planning an anticipation up front, which did help immensely, but I also had to make judgement calls throughout the course of it to make sure that I was still able to work at a reasonable pace and stay on schedule. Either way, this project served as a good exercise in improving on my design and planning process, while still anticipating enough in advance.\nConcluding Thoughts Designing this “mock” file system served as an excellent chance for me to not only learn more about low-level computer systems, but also for me to get more practice with designing and gaining more practical experience with software tooling and development in general.\n","wordCount":"1296","inLanguage":"en","datePublished":"2021-12-15T03:25:10Z","dateModified":"2021-12-15T03:25:10Z","author":{"@type":"Person","name":"Nathan Litzinger"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nlitz88.github.io/projects/filesystem/filesystem/"},"publisher":{"@type":"Organization","name":"Nathan Litzinger","logo":{"@type":"ImageObject","url":"https://nlitz88.github.io/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://nlitz88.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://nlitz88.github.io/litzingernathanresume.pdf title=Resume>
<span>Resume</span>
</a>
</li>
<li>
<a href=https://nlitz88.github.io/projects title=Projects>
<span>Projects</span>
</a>
</li>
<li>
<a href=https://nlitz88.github.io/posts title=Posts>
<span>Posts</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://nlitz88.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://nlitz88.github.io/projects/>Projects</a></div>
<h1 class=post-title>
FS3 - My Mock File System
</h1>
<div class=post-meta>December 15, 2021&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Nathan Litzinger&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/projects/filesystem/filesystem.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p>As my Fall 2021 semester comes to a close, I made the final commits to perhaps one of the most interesting projects I&rsquo;ve had the pleasure of stressing about thus far in school: building a file system.</p>
<hr>
<p>Err&ndash;okay, I won&rsquo;t sit here and pretend that my classmates and I built out fully fledged filesystems ready to be thrown into Ubuntu for production. <strong>However</strong>, that wasn&rsquo;t quite the point of this assignment. Rather, this assignment was focused on introducing us to the core tenets of system design. Namely:</p>
<h3 id=1-architecting-and-designing-useful-abstractions>1. Architecting and designing <strong>useful abstractions</strong><a hidden class=anchor aria-hidden=true href=#1-architecting-and-designing-useful-abstractions>#</a></h3>
<h3 id=2-debugging-and-profiling-our-systems>2. Debugging and profiling our systems<a hidden class=anchor aria-hidden=true href=#2-debugging-and-profiling-our-systems>#</a></h3>
<h3 id=3-maintaining-and-refactoring-our-designs-as-requirements-change>3. Maintaining and refactoring our designs as requirements change<a hidden class=anchor aria-hidden=true href=#3-maintaining-and-refactoring-our-designs-as-requirements-change>#</a></h3>
<p>Thus, this was really our professor&rsquo;s way of giving us <strong>real</strong> software engineering experience while also forcing us to really practice good software design. This proposed project was of course quite daunting, but proved to be one of the most engaging, useful, and practical development experiences I&rsquo;ve had in a class so far at Penn State!</p>
<p>On that note, I thought I&rsquo;d talk just a little about each component of this experience above, since I&rsquo;m not quite allowed to share the source code.</p>
<h2 id=1-useful-abstractions>1. Useful Abstractions<a hidden class=anchor aria-hidden=true href=#1-useful-abstractions>#</a></h2>
<p>The final component of this assignment was adding the ability to have the filesystem connect to a remote disk controller server and interface with the controller via the POSIX send/recv (read/write) operations using TCP stream sockets. It was at this point just how I realized how much more comfortable (and dare I say proficient even) I was getting at effectively abstracting away different operation sequences and levels of complexity. That is, by the time I was implementing this final feature, I felt like I could confidently come up with an attack plan that intuitively abstracted away the underlying networking operations (like the low-level POSIX calls) into robust interaces.</p>
<p>This exercise in <strong>designing useful abstractions</strong> was not only very practical for my future software projects, but also proved extremely effective in helping us internalize how systems (of all kinds) around us are designed and maintained, software or not.</p>
<p>Prior to this course (and this assignment), I had very little confidence in identifying the bridge between the high level Linux programs, tools, and interfaces that I had become famliar with and the low level components of the operating system and hardware. Now, however, I&rsquo;ve been reminded that <strong>nothing about computers is magic</strong>. Instead, it&rsquo;s all about abstracting away functionality in useful ways.
<img loading=lazy src=/projects/filesystem/magicwand.jpg alt="Not Magic">
</p>
<p>In the same way that one becomes familiar with the libraries and interfaces available when developing a python program, for instance, I feel like I can approach developing low-level programs/systems in the same way now! That is, a set of abstractions is made available for each level that you might be developing for at your disposal.</p>
<p>Perhaps more practically, however, I now feel like <strong>I&rsquo;m not limited to the level at which I can develop</strong>. If I need to develop a device driver for a custom component some day, I now know that developing software to interact with that hardware will simply involve constructing sets of useful abstractions at each software layer until the target user can carry out their operations. With this newfound confidence/knowledge, I&rsquo;ll carry on to the other takeaways.</p>
<h2 id=2-debugging-and-profiling>2. Debugging and Profiling<a hidden class=anchor aria-hidden=true href=#2-debugging-and-profiling>#</a></h2>
<p>Yes, this was the painful part. As I&rsquo;m sure many developers and students can relate to, planning, architecting, and designing your program or system is typically the cool part. Deciding what libraries, frameworks, protocols, hardware, and so on to use is&mldr;well definitely one of my favorite parts. It&rsquo;s when you start building and begin running into issues and bugs where the fun train comes to a halt.</p>
<p><em>I will say that I&rsquo;ve met quite a few people who enjoy tracking down bugs, and admittedly yes, it can be quite interesting at times. We all have to get good at it! It&rsquo;s just I find it less enjoyable when I have to spend my time indentifying careless errors.</em></p>
<p>Anyways, this assignment forced me to get <strong>really</strong> comfortable with programs like <strong>gdb</strong> and <strong>valgrind</strong>. Debugging is one of the those skills that I quite literally refused to learn up until this point. It wasn&rsquo;t me being adament or stubborn, but more so just the fact that I have not <em>needed</em> to use it up until now. That is, I could just get away with print debugging. In this assignment, however, that just wasn&rsquo;t going to be feasible.</p>
<p>I was particularly forced into using <strong>gdb</strong> at first when implementing my operations to do &ldquo;register packing.&rdquo; That is, constructing the 64-bit instructions that were used to control the virtual disk controller. Trying to debug these without being able to go line-by-line proved wildly impractical, and thus I was finally urged to jump on the gdb train, and I&rsquo;m glad I did.</p>
<p><strong>Valgrind</strong> came around when I began running into some issues reallocating my version of the <em>system open file table</em>. Valgrind helped me indirectly indentify that I was incorrectly re-allocating the table upon filling up, which really just came down to an annoyingly small usage issue. There went 7 hours of my life!</p>
<p>If I learned anything from using these tools (other than how to use them), it was the need for <strong>unit testing</strong>. One of my biggest, most time consuming errors showed up in the final component of the project, and it was a matter of missing a single line of code in a core function&ndash;a simple oversight that costed me two days of my Fall break! Implementing a simple unit test to see if it&rsquo;s behavior was up to snuff would&rsquo;ve allowed me to immediately identify my error when I built the function three weeks prior, rather than searching in the dark when I least expected for it to malfunction. Needless to say, I&rsquo;ll be thinking twice next time I build something at this kind of scale when it comes to building unit tests. When projects get large, they seem to be less of an option and more of a necessity!</p>
<h2 id=3-maintaining-and-refactoring>3. Maintaining and Refactoring<a hidden class=anchor aria-hidden=true href=#3-maintaining-and-refactoring>#</a></h2>
<p>Another big lesson that our professor wanted to give us experience with was having to refactor our project and maintain it as requirements change. Oh, and they did. I will say, however, that the more general the abstractions I created in the first iteration boded nicely for use in the additional iterations, once again reinforcing the importance of good abstractions.</p>
<p>I definitely had some experience with this already at some of the internships I&rsquo;ve done, and I think that definitely helped me quite a bit in the initial design of my system and abstractions. I&rsquo;m wired in a way wherein I often stumble over planning a little too far in advance with some of my projects/programs. This can sometimes be very annoying, as it can seem impossible to even get started! While I don&rsquo;t feel that this is a <em>bad</em> approach to design, I don&rsquo;t want it to be what stops me from taking up projects and ideas. For that reason, I&rsquo;m always looking for ways to get better about this.</p>
<p>For this assignment, I do feel as though I did a fair amount of planning an anticipation up front, which did help immensely, but I also had to make judgement calls throughout the course of it to make sure that I was still able to work at a reasonable pace and stay on schedule. Either way, this project served as a good exercise in improving on my design and planning process, while still anticipating enough in advance.</p>
<h2 id=concluding-thoughts>Concluding Thoughts<a hidden class=anchor aria-hidden=true href=#concluding-thoughts>#</a></h2>
<p>Designing this &ldquo;mock&rdquo; file system served as an excellent chance for me to not only learn more about low-level computer systems, but also for me to get more practice with designing and gaining more practical experience with software tooling and development in general.</p>
</div>
<footer class=post-footer>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://nlitz88.github.io/>Nathan Litzinger</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>